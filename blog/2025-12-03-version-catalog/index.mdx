---
slug: mts-version-catalog
title: 국내 MTS에 Version Catalog 도입하기
authors: [way]
tags: [android,toml,version-catalog,gradle,mts]
---

국내 MTS 프로젝트에 합류하면서 마주한 기존 환경은 처음 기대했던 것보다 조금 복잡했습니다.<br/>
여러 모듈에서 각기 다른 라이브러리 버전을 사용하고 있어, 우선 이들을 일관되게 관리하는 방법을 고민하게 되었습니다.

프로젝트 구조는 대략 다음과 같았습니다.

```text
|----app
|----3rd_party_library_1
|----3rd_party_library_2
|----3rd_party_library_3
|----3rd_party_library_4
|----formdeCore
```

Gradle의 [Version Catalog](https://developer.android.com/build/migrate-to-catalogs?hl=ko)를 도입해 모듈 간 라이브러리 버전을 중앙에서 관리하도록 변경했습니다.<br/>
구체적으로는 `gradle/libs.versions.toml` 파일을 만들고, 각 모듈의 `build.gradle.kts`에서 해당 카탈로그를 참조하도록 했습니다.

예시로 사용한 `libs.versions.toml`은 다음과 같습니다.

```toml
[versions]
kotlin = "2.0.21"
target-sdk = "36"
jvm = "17"
min-sdk = "26"
compile-sdk = "36"
android-gradle-plugin = "8.3.2"
.
.
.

[plugins]
android-application = { id = "com.android.application", version.ref = "android-gradle-plugin" }
.
.
.

[libraries]
android-gradle-plugin = { module = "com.android.tools.build:gradle", version.ref = "android-gradle-plugin" }
.
.
.
[bundles]
kotlin = ["kotlin-stdlib", "kotlin-reflect"]
```

그리고 각 모듈의 `build.gradle.kts`에서 다음과 같이 플러그인과 버전을 참조하도록 변경했습니다.

```kotlin
plugins {
    alias(libs.plugins.android.application)
    alias(libs.plugins.kotlin.android)
}

android {
    compileSdk = libs.versions.compile.sdk.get().toInt()

    defaultConfig {
        applicationId = "com.example.app"
        minSdk = libs.versions.min.sdk.get().toInt()
        targetSdk = libs.versions.target.sdk.get().toInt()
        versionCode = 1
        versionName = "1.0"
    }
    dependencies {
        implementation(libs.bundles.kotlin)
    }
}
```

이와 같이 Version Catalog를 적용하면, 라이브러리 버전 관리가 일관화되어 업데이트나 충돌 해결이 훨씬 수월해집니다.<br/>
또한, 새로운 라이브러리를 추가할 때도 중앙 파일만 수정하면 되므로 유지보수가 간편해집니다.